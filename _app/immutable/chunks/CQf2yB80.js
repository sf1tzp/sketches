import{ab as I,ac as x,D as b,p as E,n as w,m as A,h as y,k as M,z as B,ad as L,ae as T,af as Y,ag as N,g,a4 as U,ah as k,ai as q,aj as z,ak as C,l as F,al as K,am as $,u as j,an as G,ao as Z,ap as H,aq as J,_ as Q,ar as V}from"./BETZE4PW.js";class te{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,s=!0){this.anchor=e,this.#a=s}#i=()=>{var e=I;if(this.#t.has(e)){var s=this.#t.get(e),r=this.#s.get(s);if(r)x(r),this.#r.delete(s);else{var i=this.#e.get(s);i&&(this.#s.set(s,i.effect),this.#e.delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,c]of this.#t){if(this.#t.delete(a),a===e)break;const n=this.#e.get(c);n&&(b(n.effect),this.#e.delete(c))}for(const[a,c]of this.#s){if(a===s||this.#r.has(a))continue;const n=()=>{if(Array.from(this.#t.values()).includes(a)){var u=document.createDocumentFragment();B(c,u),u.append(w()),this.#e.set(a,{effect:c,fragment:u})}else b(c);this.#r.delete(a),this.#s.delete(a)};this.#a||!r?(this.#r.add(a),E(c,n,!1)):n()}}};#n=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[r,i]of this.#e)s.includes(r)||(b(i.effect),this.#e.delete(r))};ensure(e,s){var r=I,i=L();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(i){var a=document.createDocumentFragment(),c=w();a.append(c),this.#e.set(e,{effect:A(()=>s(c)),fragment:a})}else this.#s.set(e,A(()=>s(this.anchor)));if(this.#t.set(r,e),i){for(const[n,d]of this.#s)n===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[n,d]of this.#e)n===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(this.#i),r.ondiscard(this.#n)}else y&&(this.anchor=M),this.#i()}}let p=!1;function W(t){var e=p;try{return p=!1,[t(),p]}finally{p=e}}const X={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function se(t,e,s){return new Proxy({props:t,exclude:e},X)}function re(t,e,s,r){var i=!G||(s&Z)!==0,a=(s&$)!==0,c=(s&J)!==0,n=r,d=!0,u=()=>(d&&(d=!1,n=c?j(r):r),n),h;if(a){var D=Q in t||V in t;h=T(t,e)?.set??(D&&e in t?f=>t[e]=f:void 0)}var l,S=!1;a?[l,S]=W(()=>t[e]):l=t[e],l===void 0&&r!==void 0&&(l=u(),h&&(i&&Y(),h(l)));var o;if(i?o=()=>{var f=t[e];return f===void 0?u():(d=!0,f)}:o=()=>{var f=t[e];return f!==void 0&&(n=void 0),f===void 0?n:f},i&&(s&N)===0)return o;if(h){var O=t.$$legacy;return(function(f,v){return arguments.length>0?((!i||!v||O||S)&&h(v?o():f),f):o()})}var m=!1,_=((s&H)!==0?U:k)(()=>(m=!1,o()));a&&g(_);var R=F;return(function(f,v){if(arguments.length>0){const P=v?g(_):i&&a?q(f):f;return z(_,P),m=!0,n!==void 0&&(n=P),f}return C&&m||(R.f&K)!==0?_.v:g(_)})}export{te as B,re as p,se as r};
